---
namespace: capms-system
namePrefix: capms-

resources:
- bases/cluster-role-binding.yaml
- bases/cluster-role.yaml
- bases/deployment.yaml
- bases/mutatingwebhookconfiguration.yaml
- bases/sa.yaml
- bases/secret-ca.yaml
- bases/secret.yaml
- bases/service.yaml
- bases/validatingwebhookconfiguration.yaml

labels:
- includeSelectors: true
  pairs:
    clusterctl.cluster.x-k8s.io/move: ""
    # or cluster.x-k8s.io/provider: infrastructure-metal-stack?

patches:
# [WEBHOOK] To enable webhook, uncomment all the sections with [WEBHOOK] prefix.
# patches here are for enabling the conversion webhook for each CRD
# +kubebuilder:scaffold:crdkustomizewebhookpatch

# [CERTMANAGER] To enable cert-manager, uncomment all the sections with [CERTMANAGER] prefix.
# patches here are for enabling the CA injection for each CRD
#- path: patches/cainjection_in_metalstackclusters.yaml
#- path: patches/cainjection_in_metalstackmachines.yaml
# +kubebuilder:scaffold:crdkustomizecainjectionpatch

# [WEBHOOK] To enable webhook, uncomment the following section
# the following config is for teaching kustomize how to do kustomization for CRDs.

configurations:
- kustomizeconfig.yaml
